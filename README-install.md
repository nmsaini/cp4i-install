# cp4i fresh install

Refer to [2022.2.1 docs](https://www.ibm.com/docs/en/cloud-paks/cp-integration/2022.2?topic=images-adding-catalog-sources-cluster)

## Step 1. Install ibm-pak plugin to ocp
```
./install-ibm-pak-plugin.sh
```

## Step 2. Generate your operator manifest files
```
./gen-operator-catalog.sh catalog.2022.2.txt
```
You will need to apply the catalog-sources yaml that is generated by the above script
```
******************************************************************
********** apply the following operator manifests ****************
******************************************************************
oc apply -f /root/.ibm-pak/data/mirror/ibm-integration-platform-navigator/1.7.11/catalog-sources.yaml
oc apply -f /root/.ibm-pak/data/mirror/ibm-integration-asset-repository/1.5.10/catalog-sources-linux-amd64.yaml
oc apply -f /root/.ibm-pak/data/mirror/ibm-integration-operations-dashboard/2.6.12/catalog-sources-linux-amd64.yaml
oc apply -f /root/.ibm-pak/data/mirror/ibm-apiconnect/4.0.4/catalog-sources.yaml
oc apply -f /root/.ibm-pak/data/mirror/ibm-apiconnect/4.0.4/catalog-sources-linux-amd64.yaml
oc apply -f /root/.ibm-pak/data/mirror/ibm-appconnect/5.0.8/catalog-sources.yaml
oc apply -f /root/.ibm-pak/data/mirror/ibm-mq/2.0.12/catalog-sources.yaml
oc apply -f /root/.ibm-pak/data/mirror/ibm-eventstreams/3.2.1/catalog-sources.yaml
oc apply -f /root/.ibm-pak/data/mirror/ibm-datapower-operator/1.6.8/catalog-sources-linux-amd64.yaml
oc apply -f /root/.ibm-pak/data/mirror/ibm-aspera-hsts-operator/1.5.9/catalog-sources.yaml
******************************************************************
```
validate the new catalog sources.
```
oc -n openshift-marketplace get catalogsources
```

## Step 3. Create a subsciption for your operators
```
./gen-subscription-plan.sh subscription-plan.txt
```
This creats the sub in the current project namespace so be careful you are in the correct namespace context

## Step 4. create a pull secret
create your pull secret either in the global pull-secret or in the namespace
```
oc create secret docker-registry ibm-entitlement-key \
    --docker-username=cp \
    --docker-password=$KEY \
    --docker-server=cp.icr.io \
    --namespace=$NS
```

## Step 5. Validate before creating operands
Validate your subscriptions are healthy
